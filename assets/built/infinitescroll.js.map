{"version":3,"file":"infinitescroll.js","sources":["infinitescroll.js"],"sourcesContent":["/**\n * Infinite Scroll\n */\n\n(function(window, document) {\n    // next link element\n    var nextElement = document.querySelector(\"link[rel=next]\");\n    if (!nextElement) {\n        document.querySelector(\".read-more-row\").remove();\n        return;\n    }\n\n    // post feed element\n    var feedElement = document.querySelector(\".post-feed\");\n    if (!feedElement) return;\n\n    var loading = false;\n\n    function onPageLoad() {\n        if (this.status === 404) {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n            return;\n        }\n        // append contents\n        var postElements = this.response.querySelectorAll(\".post-card\");\n        postElements.forEach(function(item) {\n            feedElement.appendChild(item);\n        });\n\n        // set next link\n        var resNextElement = this.response.querySelector(\"link[rel=next]\");\n        if (resNextElement) {\n            nextElement.href = resNextElement.href;\n        } else {\n            document\n                .getElementById(\"readMoreBtn\")\n                .removeEventListener(\"click\", onUpdate);\n            document.querySelector(\".read-more-row\").remove();\n        }\n\n        // sync status\n        loading = false;\n    }\n\n    function onUpdate() {\n        // return if already loading\n        if (loading) return;\n\n        loading = true;\n\n        var xhr = new window.XMLHttpRequest();\n        xhr.responseType = \"document\";\n\n        xhr.addEventListener(\"load\", onPageLoad);\n\n        xhr.open(\"GET\", nextElement.href);\n        xhr.send(null);\n    }\n\n    document\n        .getElementById(\"readMoreBtn\")\n        .addEventListener(\"click\", onUpdate, { passive: true });\n})(window, document);\n"],"names":["window","document","nextElement","querySelector","feedElement","loading","getElementById","addEventListener","onUpdate","passive","remove","onPageLoad","this","status","response","querySelectorAll","forEach","item","appendChild","resNextElement","href","removeEventListener","xhr","XMLHttpRequest","responseType","open","send"],"mappings":"CAIA,SAAUA,EAAQC,GAEd,IAAIC,EAAcD,EAASE,cAAc,kBACzC,GAAKD,EAAL,CAMA,IAAIE,EAAcH,EAASE,cAAc,cACzC,GAAKC,EAAL,CAEA,IAAIC,GAAU,EA6CdJ,EACKK,eAAe,eACfC,iBAAiB,QAASC,EAAU,CAAEC,SAAS,UAvDhDR,EAASE,cAAc,kBAAkBO,SAU7C,SAASC,IACL,GAAoB,MAAhBC,KAAKC,OAAT,CAOmBD,KAAKE,SAASC,iBAAiB,cACrCC,QAAQ,SAASC,GAC1Bb,EAAYc,YAAYD,KAI5B,IAAIE,EAAiBP,KAAKE,SAASX,cAAc,kBAC7CgB,EACAjB,EAAYkB,KAAOD,EAAeC,MAElCnB,EACKK,eAAe,eACfe,oBAAoB,QAASb,GAClCP,EAASE,cAAc,kBAAkBO,UAI7CL,GAAU,OAvBNJ,EACKK,eAAe,eACfe,oBAAoB,QAASb,GAwB1C,SAASA,IAEL,IAAIH,EAAJ,CAEAA,GAAU,EAEV,IAAIiB,EAAM,IAAItB,EAAOuB,eACrBD,EAAIE,aAAe,WAEnBF,EAAIf,iBAAiB,OAAQI,GAE7BW,EAAIG,KAAK,MAAOvB,EAAYkB,MAC5BE,EAAII,KAAK,QAtDjB,CA4DG1B,OAAQC"}